<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML
><HEAD
><TITLE
>find: busca archivos en función de ciertos
 criterios</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.59"><LINK
REL="HOME"
TITLE="Linux-Mandrake"
HREF="index.html"><LINK
REL="UP"
TITLE="Los utilitarios de la línea de
 comandos"
HREF="command.html"><LINK
REL="PREVIOUS"
TITLE="Los utilitarios de la línea de
 comandos"
HREF="command.html"><LINK
REL="NEXT"
TITLE="crontab: reportar o editar su archivo
 crontab"
HREF="command-cron.html">
<meta name="Author" content="MandrakeSoft">
<meta name="Description" content="This is Linux-Mandrake Documentation.">
<meta name="KeyWords" content="Linux, Mandrake, Linux-Mandrake, documentation, Mandrake Books, howto, Powerpack">

</HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#666699"
VLINK="#980060"
ALINK="#FF0000"
>

<DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
><B
CLASS="EMPHASIS"
>Linux-Mandrake</B
>: <B
CLASS="EMPHASIS"
>Manual de Referencia</B
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="command.html"
>Anterior</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Capítulo 16. Los utilitarios de la línea de
 comandos</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="command-cron.html"
>Siguiente</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="COMMAND-FIND"
>16.2. <TT
CLASS="COMMAND"
>find</TT
>: busca archivos en función de ciertos
 criterios</A
></H1
><P
>&#13;<TT
CLASS="COMMAND"
>find</TT
> es un utilitario de <TT
CLASS="APPLICATION"
><I
>Unix</I
></TT
> muy antiguo. Su rol
 es buscar recursivamente uno o más directorios y encontrar archivos
 que se correspondan con un cierto conjunto de criterios en esos
 directorios. Aunque es muy útil, su sintaxis es verdaderamente
 compleja, y usarlo requiere cierta práctica. La sintaxis general es:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>find [opciones] [directorios] [criterios] [acción]</PRE
></TD
></TR
></TABLE
><P
>Si no especifica directorio alguno, <TT
CLASS="COMMAND"
>find</TT
> buscará en el
 directorio corriente. Si no especifica el criterio, esto es
 equivalente a <SPAN
CLASS="QUOTE"
>"verdadero"</SPAN
>, por lo que se encontrarán todos
 los archivos. Las opciones, criterios y acciones son tan numerosas
 que solo mencionaremos algunas de cada una. Comencemos por las
 opciones:</P
><P
></P
><OL
TYPE="1"
><LI
><P
><TT
CLASS="OPTION"
>-xdev</TT
>: No extender la búsqueda a los directorios ubicados en
 otros sistemas de archivos.</P
></LI
><LI
><P
><TT
CLASS="OPTION"
>-mindepth &lt;n&gt;</TT
>: Descender al menos <TT
CLASS="OPTION"
>&lt;n&gt;</TT
>
 niveles bajo el directorio especificado antes de comenzar a buscar los
 archivos.</P
></LI
><LI
><P
><TT
CLASS="OPTION"
>-maxdepth &lt;n&gt;</TT
>: Buscar los archivos que se encuentran a
 lo sumo <TT
CLASS="LITERAL"
>n</TT
> niveles bajo el directorio especificado.</P
></LI
><LI
><P
><TT
CLASS="OPTION"
>-follow</TT
>: Seguir los vínculos simbólicos si apuntan a
 directorios. Predeterminadamente, <TT
CLASS="COMMAND"
>find</TT
>, no los sigue.</P
></LI
><LI
><P
><TT
CLASS="OPTION"
>-daystart</TT
>: Cuando se usan las pruebas relativas a la fecha
 y la hora (ver debajo), toma el comienzo del día corriente como
 etiqueta temporal en vez del predeterminado (24 horas antes de la
 hora corriente).</P
></LI
></OL
><P
>Un criterio puede ser uno o más de varias pruebas
 <B
CLASS="GLOSSTERM"
><I
>atómicas</I
></B
>; algunas
  pruebas útiles son:</P
><P
></P
><OL
TYPE="1"
><LI
><P
><TT
CLASS="OPTION"
>-type &lt;tipo&gt;</TT
>: Busca los archivos de un tipo dado;
 <TT
CLASS="OPTION"
>&lt;tipo&gt;</TT
> puede ser uno de: <TT
CLASS="LITERAL"
>f</TT
> (archivo
 regular), <TT
CLASS="LITERAL"
>d</TT
> (directorio), <TT
CLASS="LITERAL"
>l</TT
> (vínculo
 simbólico), <TT
CLASS="LITERAL"
>s</TT
> (<TT
CLASS="FOREIGNPHRASE"
><I
>socket</I
></TT
>), <TT
CLASS="LITERAL"
>b</TT
>
 (archivo en modo de bloques), <TT
CLASS="LITERAL"
>c</TT
> (archivo en modo caracter)
 o <TT
CLASS="LITERAL"
>p</TT
> (tubería nombrada).</P
></LI
><LI
><P
><TT
CLASS="OPTION"
>-name &lt;patrón&gt;</TT
>: Encontrar los archivos cuyo nombre se
 corresponde con el <TT
CLASS="OPTION"
>&lt;patrón&gt;</TT
> dado. Con esta opción, se
 trata a <TT
CLASS="OPTION"
>&lt;patrón&gt;</TT
> como un
 <B
CLASS="GLOSSTERM"
><I
>patrón de
 englobamiento</I
></B
> del <TT
CLASS="FOREIGNPHRASE"
><I
>shell</I
></TT
> (vea el capítulo
 <A
HREF="glob-regex.html"
><I
>Patrones de englobamiento &nbsp;del <TT
CLASS="FOREIGNPHRASE"
><I
>shell</I
></TT
> &nbsp;y 
<B
CLASS="GLOSSTERM"
><I
>&nbsp;expresiones &nbsp;regulares</I
></B
></I
></A
>).</P
></LI
><LI
><P
><TT
CLASS="OPTION"
>-iname &lt;patrón&gt;</TT
>: Como <TT
CLASS="OPTION"
>-name</TT
>, pero sin
 tener en cuenta la capitalización.</P
></LI
><LI
><P
><TT
CLASS="OPTION"
>-atime &lt;n&gt;</TT
>, <TT
CLASS="OPTION"
>-amin &lt;n&gt;</TT
>: Encontrar los
 archivos a los que se ha accedido en los últimos <TT
CLASS="OPTION"
>&lt;n&gt;</TT
>
 días (<TT
CLASS="OPTION"
>-atime</TT
>) o en los últimos <TT
CLASS="OPTION"
>&lt;n&gt;</TT
> minutos
 (<TT
CLASS="OPTION"
>-amin</TT
>). También puede especificar <TT
CLASS="OPTION"
>+&lt;n&gt;</TT
> o
 <TT
CLASS="OPTION"
>-&lt;n&gt;</TT
>, en cuyo caso la búsqueda se hará para los
 archivos accedidos respectivamente hace al menos o a lo sumo
 <TT
CLASS="OPTION"
>&lt;n&gt;</TT
> días/minutos.</P
></LI
><LI
><P
><TT
CLASS="OPTION"
>-anewer &lt;archivo&gt;</TT
>: Encontrar los archivos que han sido
 accedidos más recientemente que el archivo <TT
CLASS="OPTION"
>&lt;archivo&gt;</TT
></P
></LI
><LI
><P
><TT
CLASS="OPTION"
>-ctime &lt;n&gt;</TT
>, <TT
CLASS="OPTION"
>-cmin &lt;n&gt;</TT
>,
 <TT
CLASS="OPTION"
>-cnewer &lt;archivo&gt;</TT
> Igual que para <TT
CLASS="OPTION"
>-atime</TT
>,
 <TT
CLASS="OPTION"
>-amin</TT
> y <TT
CLASS="OPTION"
>-anewer</TT
>, pero se aplica a la última
 fecha en la cual se modificó el contenido del archivo
 <TT
CLASS="OPTION"
>&lt;archivo&gt;</TT
>.</P
></LI
><LI
><P
><TT
CLASS="OPTION"
>-regex &lt;patrón&gt;</TT
>: Como para <TT
CLASS="OPTION"
>-name</TT
>, pero
 <TT
CLASS="LITERAL"
>patrón</TT
> se trata como una expresión regular.</P
></LI
><LI
><P
><TT
CLASS="OPTION"
>-iregex &lt;patrón&gt;</TT
>: Como <TT
CLASS="OPTION"
>-regex</TT
>, pero sin
 tener en cuenta la capitalización.</P
></LI
></OL
><P
>Existen muchas otras pruebas, debe referirse a la página
 <TT
CLASS="COMMAND"
>man</TT
> de <TT
CLASS="COMMAND"
>find</TT
> para más detalles. Para combinar
 las pruebas, Ud. puede utilizar uno de:</P
><P
></P
><OL
TYPE="1"
><LI
><P
><TT
CLASS="OPTION"
>&lt;c1&gt;</TT
> -a &lt;c2&gt;: Verdadero si tanto
 <TT
CLASS="OPTION"
>&lt;c1&gt;</TT
> como <TT
CLASS="OPTION"
>&lt;c2&gt;</TT
> son verdaderas;
 <TT
CLASS="OPTION"
>-a</TT
> está implícito, por lo tanto puede ingresar
 <TT
CLASS="OPTION"
>&lt;c1&gt;</TT
> &lt;c2&gt; &lt;c3&gt; ... si quiere que todas
 las pruebas <TT
CLASS="OPTION"
>&lt;c1&gt;</TT
>, <TT
CLASS="OPTION"
>&lt;c2&gt;</TT
>, ... se
 verifiquen.</P
></LI
><LI
><P
><TT
CLASS="OPTION"
>&lt;c1&gt;</TT
> -o &lt;c2&gt;: Verdadero si
 <TT
CLASS="OPTION"
>&lt;c1&gt;</TT
> o <TT
CLASS="OPTION"
>&lt;c2&gt;</TT
> o ambos son verdaderos.
 Note que <TT
CLASS="OPTION"
>-o</TT
> tiene una
 <B
CLASS="GLOSSTERM"
><I
>precedencia</I
></B
> menor
 que <TT
CLASS="OPTION"
>-a</TT
>, por lo tanto si desea, por ejemplo, los archivos
 que verifican los criterios <TT
CLASS="OPTION"
>&lt;c1&gt;</TT
> o
 <TT
CLASS="OPTION"
>&lt;c2&gt;</TT
> y verifican el criterio <TT
CLASS="OPTION"
>&lt;c3&gt;</TT
>,
 tendrá que usar paréntesis y escribir
 <TT
CLASS="OPTION"
>( &lt;c1&gt;</TT
> -o &lt;c2&gt; ) -a &lt;c3&gt;. Debe
 <B
CLASS="GLOSSTERM"
><I
>escapar</I
></B
> (desactivar) los
 paréntesis, ya que si no lo hace ¡el <TT
CLASS="FOREIGNPHRASE"
><I
>shell</I
></TT
> los interpretará!</P
></LI
><LI
><P
><TT
CLASS="OPTION"
>-not &lt;c1&gt;</TT
>: Invertir la prueba <TT
CLASS="OPTION"
>&lt;c1&gt;</TT
>,
 por lo tanto <TT
CLASS="OPTION"
>-not &lt;c1&gt;</TT
> es verdadero si
 <TT
CLASS="OPTION"
>&lt;c1&gt;</TT
> es falso.</P
></LI
></OL
><P
>Finalmente, puede especificar una acción para cada archivo encontrado.
 Las acciones más usadas frecuentemente son:</P
><P
></P
><OL
TYPE="1"
><LI
><P
><TT
CLASS="OPTION"
>-print</TT
>: Simplemente imprime el nombre de cada archivo en la
 salida estándar. Esta es la acción predeterminada si Ud. no especifica
 acción alguna.</P
></LI
><LI
><P
><TT
CLASS="OPTION"
>-ls</TT
>: Imprime en la salida estándar el equivalente de
 <TT
CLASS="COMMAND"
>ls -ilds</TT
> para cada archivo que encuentra.</P
></LI
><LI
><P
><TT
CLASS="OPTION"
>-exec &lt;comando&gt;</TT
>: Ejecutar el comando
 <TT
CLASS="OPTION"
>&lt;comando&gt;</TT
> sobre cada archivo encontrado. La línea de
 comandos <TT
CLASS="OPTION"
>&lt;comando&gt;</TT
> debe terminar con un
 <TT
CLASS="LITERAL"
>;</TT
>, que deberá desactivar para que el <TT
CLASS="FOREIGNPHRASE"
><I
>shell</I
></TT
> no lo
 interprete; la posición del archivo se representa con
 <TT
CLASS="LITERAL"
>{}</TT
>. Vea los ejemplos de uso para entender mejor esto.</P
></LI
><LI
><P
><TT
CLASS="OPTION"
>-ok &lt;comando&gt;</TT
>: Igual que <TT
CLASS="OPTION"
>-exec</TT
> pero pedir
 confirmación para cada comando.</P
></LI
></OL
><P
>¿Todavía está aquí? Está bien, ahora practiquemos un poco, ya que
 todavía es la mejor forma de entender a este monstruo. Digamos que
 quiere encontrar todos los directorios en <TT
CLASS="FILENAME"
>/usr/share</TT
>.
 Entonces ingresará:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>find /usr/share -type d</PRE
></TD
></TR
></TABLE
><P
>Suponga que tiene un servidor <SPAN
CLASS="ACRONYM"
>HTTP</SPAN
>, todos sus archivos <SPAN
CLASS="ACRONYM"
>HTML</SPAN
> están
 en <TT
CLASS="FILENAME"
>/home/httpd/html</TT
>, que coincide con su directorio
 corriente. Ud. desea encontrar todos los archivos que no se
 modificaron en el último mes. Debido a que tiene páginas de varios
 autores, algunos archivos tienen la extensión <TT
CLASS="FILENAME"
>html</TT
> y
 otros la extensión <TT
CLASS="FILENAME"
>htm</TT
>. Desea vincular estos archivos en
 el directorio <TT
CLASS="FILENAME"
>/home/httpd/obsolete</TT
>. Entonces ingresará:</P
><P
><TT
CLASS="COMMAND"
>find \( -name "*.htm" -o -name "*.html" \) -a -ctime -30 -exec ln &lcub;&rcub; /home/httpd/obsolete \;</TT
><A
NAME="AEN6625"
HREF="#FTN.AEN6625"
>[1]</A
></P
><P
>Está bien, este es uno un poco complejo y requiere una pequeña
 explicación. El criterio es este:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>\( -name "*.htm" -o -name "*.html" \) -a -ctime -30</PRE
></TD
></TR
></TABLE
><P
>que hace lo que queremos: encuentra todos los archivos cuyos nombres
 terminan con <TT
CLASS="FILENAME"
>.htm</TT
> o con <TT
CLASS="FILENAME"
>.html</TT
>
 <SPAN
CLASS="QUOTE"
>"<TT
CLASS="COMMAND"
>\( -name "*.htm" -o -name "*.html" \)</TT
>"</SPAN
>,
 <B
CLASS="EMPHASIS"
>y</B
> (<TT
CLASS="COMMAND"
>-a</TT
>) que no han sido modificados en los
 últimos 30 días, lo que es más o menos un mes
 (<TT
CLASS="COMMAND"
>-ctime -30</TT
>). Note los paréntesis: aquí son necesarios,
 porque <TT
CLASS="COMMAND"
>-a</TT
> tiene una precedencia mayor. Si no hubiera
 paréntesis alguno, se hubieran encontrado todos los archivos que
 terminen con <TT
CLASS="FILENAME"
>.htm</TT
>, y todos los archivos que terminen con
 <TT
CLASS="FILENAME"
>.html</TT
> y que no han sido modificados por un mes, que no es
 lo que nosotros queremos. Note también que los paréntesis están
 desactivados para el <TT
CLASS="FOREIGNPHRASE"
><I
>shell</I
></TT
>: si hubiésemos puesto
 <TT
CLASS="COMMAND"
>( .. )</TT
> en vez de <TT
CLASS="COMMAND"
>\( .. \)</TT
>, el <TT
CLASS="FOREIGNPHRASE"
><I
>shell</I
></TT
> los
 hubiese interpretado y tratado de ejecutar
 <TT
CLASS="COMMAND"
>-name "*.htm" -o -name "*.html"</TT
> en un sub-shell... Otra
 solución podría haber sido poner los paréntesis entre comillas simples
 o dobles, pero aquí es preferible una contra-barra ya que solo tenemos
 que aislar un solo caracter.</P
><P
>Y finalmente, está el comando a ejecutar para cada uno de los archivos:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>-exec ln {} /home/httpd/obsolete \;</PRE
></TD
></TR
></TABLE
><P
>Aquí también, tiene que desactivar el <TT
CLASS="LITERAL"
>;</TT
> para el
 <TT
CLASS="FOREIGNPHRASE"
><I
>shell</I
></TT
>, ya que de no ser así el <TT
CLASS="FOREIGNPHRASE"
><I
>shell</I
></TT
> lo interpretaría
 como un separador de comandos. Si no lo hace, <TT
CLASS="COMMAND"
>find</TT
> se
 quejará que le falta un argumento a <TT
CLASS="OPTION"
>-exec</TT
>.</P
><P
>Un último ejemplo: tiene un directorio enorme denominado
 <TT
CLASS="FILENAME"
>/shared/images</TT
>, con todo tipo de imágenes en él.
 Regularmente, Ud. usa el comando <TT
CLASS="COMMAND"
>touch</TT
> para actualizar la
 fecha de un archivo denominado <TT
CLASS="FILENAME"
>stamp</TT
> en este directorio,
 para que tenga una referencia temporal. Ud. quiere encontrar todas
 las imágenes <B
CLASS="GLOSSTERM"
><I
><SPAN
CLASS="ACRONYM"
>JPEG</SPAN
></I
></B
> en el
 mismo que son más nuevas que el archivo <TT
CLASS="FILENAME"
>stamp</TT
>, y ya que
 Ud. obtuvo las imágenes de varias fuentes, estos archivos tienen las
 extensiones <TT
CLASS="FILENAME"
>jpg</TT
>, <TT
CLASS="FILENAME"
>jpeg</TT
>, <TT
CLASS="FILENAME"
>JPG</TT
> o
 <TT
CLASS="FILENAME"
>JPEG</TT
>. También quiere evitar buscar en el directorio
 <TT
CLASS="FILENAME"
>old</TT
>. Quiere que se le envíe la lista de estos archivos
 por correo electrónico, y su nombre de usuario es <TT
CLASS="USERINPUT"
><B
>juan</B
></TT
>:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>find /shared/images -cnewer     \
     /shared/images/stamp       \
     -a -iregex ".*\.jpe?g"     \
     -a -not -regex ".*/old/.*" \
       | mail juan -s "Imagenes nuevas"</PRE
></TD
></TR
></TABLE
><P
>¡Y eso es todo! Por supuesto, este comando no es muy útil si tiene que
 ingresarlo cada vez, y quisiera ejecutarlo regularmente... Puede
 hacer lo siguiente:</P
></DIV
><H3
CLASS="FOOTNOTES"
>Notas</H3
><TABLE
BORDER="0"
CLASS="FOOTNOTES"
WIDTH="100%"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN6625"
HREF="command-find.html#AEN6625"
>[1]</A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>Note que este
 ejemplo requiere que <TT
CLASS="FILENAME"
>/home/httpd</TT
> y
 <TT
CLASS="FILENAME"
>/home/httpd/obsolete</TT
> ¡estén en el mismo sistema de
 archivos!</P
></TD
></TR
></TABLE
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="command.html"
>Anterior</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
>Inicio</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="command-cron.html"
>Siguiente</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Los utilitarios de la línea de
 comandos</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="command.html"
>Subir</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><TT
CLASS="COMMAND"
>crontab</TT
>: reportar o editar su archivo
 <TT
CLASS="FILENAME"
>crontab</TT
></TD
></TR
></TABLE
></DIV
>
  <hr align="center">
  <div align="left"><a href="http://www.linux-mandrake.com"><img
    src="../images/tux48.png" width="48" height="39" align="left" border="0"
    alt="Tux sobre Estrella por MandrakeSoft"></a> <font face="Helvetica,
    Arial, sans-serif" size="2">Linux es una marca registrada de 
    Linus Torvalds. Todas las otras marcas registradas y copyrights son la
    propiedad de sus respectivos due&ntilde;os.<br>A menos que se diga lo
	contrario, todo el contenido de estas p&aacute;ginas y todas las
	im&aacute;genes tienen Copyright de <i>MandrakeSoft S.A.</i> y de
	<i>MandrakeSoft Inc.</i> 2000.
    <br><a
    href="http://www.linux-mandrake.com/">http://www.linux-mandrake.com/</a>
    <br>
</font>
 </div>

</BODY

></HTML
>